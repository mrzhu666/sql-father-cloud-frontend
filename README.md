# sql-father-cloud å‰ç«¯

## éƒ¨ç½²

### Dockerç¼–è¯‘ä¸è¿è¡Œ

- è¿è¡Œ

```sh
docker stop sql-father-nginx
docker rm sql-father-nginx
docker rmi -f sql-father-nginx

docker build -t sql-father-nginx .
#docker run -d -p 80:80 --name sql-father-nginx sql-father-nginx
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

- æ„å»º

```
docker compose -f docker-compose.yml build
```

- é•œåƒéƒ¨ç½²

```
docker stack deploy -c docker-compose.yml sql-father-cloud
```

### å·²å®‰è£…nginx

- æ„å»ºé™æ€æ–‡ä»¶

```
npm run build
```

- å¤åˆ¶sql-father-cloud.confæ–‡ä»¶åˆ°conf.dæ–‡ä»¶å¤¹ä¸­

- æ„å»ºæ–‡ä»¶

```shell
echo `whoami`
echo "æ¸…ç©ºæ–‡ä»¶å¤¹"
sudo rm -rf /var/www/sql-father-cloud/*
echo "æ„å»ºé™æ€æ–‡ä»¶"
npm run build
echo "å¤åˆ¶æ–‡ä»¶"
sudo cp -r ./dist/. /var/www/sql-father-cloud
```




## é¡¹ç›®èƒŒæ™¯

é¡¹ç›®çš„åˆ›ä½œèµ·å› å°±æ˜¯é±¼çš®ä¸ºäº†è§£å†³è‡ªå·±å¼€å‘é¡¹ç›®æ—¶åå¤å†™ SQL å»ºè¡¨å’Œé€ æ•°æ®çš„éº»çƒ¦ï¼Œé¡ºä¾¿å¼€æºç»™å¤§å®¶ä¸€èµ·æ¥å­¦ä¹ å’Œå®Œå–„~

è¯•æƒ³ä¸€ä¸‹ï¼šå¦‚æœæˆ‘åšæ–°é¡¹ç›®çš„æ—¶å€™ï¼Œä¸ç”¨å†™å»ºè¡¨ SQLã€ä¸ç”¨é€ æ•°æ®ï¼Œèƒ½ç›´æ¥å¾—åˆ°ä¸€ä¸ªé€ å¥½äº†å‡æ•°æ®çš„è¡¨ï¼Œé‚£è¯¥æœ‰å¤šå¥½ï¼

> æœ‰åŒå­¦é—®ä¸ºä»€ä¹ˆé¡¹ç›®ä¸å« SQL Motherï¼Ÿé‚£æˆ‘é—®é—®ä½ ä¸ºä»€ä¹ˆç»§æ‰¿å«çˆ¶ç±»ï¼Ÿ



## åº”ç”¨åœºæ™¯

æ— è®ºä½ æ˜¯å‰ç«¯ã€åç«¯ã€æµ‹è¯•ã€æ•°æ®å¼€å‘ã€æ•°æ®ç§‘å­¦ï¼Œè¿˜æ˜¯ç ”ç©¶æ–¹å‘çš„åŒå­¦ï¼Œç›¸ä¿¡è¿™ä¸ªå·¥å…·éƒ½ä¼šå¯¹ä½ æœ‰å¸®åŠ©ï¼

ä¸»è¦åº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š

1ï¼‰é€šè¿‡å¡«å†™å¯è§†åŒ–è¡¨å•çš„æ–¹å¼ï¼Œå¿«é€Ÿç”Ÿæˆå»ºè¡¨è¯­å¥ã€æ¨¡æ‹Ÿæ•°æ®å’Œä»£ç ï¼Œå‘Šåˆ«é‡å¤å·¥ä½œï¼

![](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1/1666098192337-c6ef4c6f-1d41-421e-882f-a40b17f8790f-20221019132251475-20221019132502279-20221019132511408.png)

2ï¼‰æ”¯æŒå¤šç§å¿«æ·å¯¼å…¥æ–¹å¼ã€‚æ¯”å¦‚å·²ç»æœ‰ç°æˆçš„æ•°æ®è¡¨ï¼Œå¯ä»¥ç›´æ¥å¯¼å…¥å»ºè¡¨è¯­å¥ï¼Œä¸€é”®ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼›è¿˜å¯ä»¥ç›´æ¥å¯¼å…¥ Excel è¡¨æ ¼ï¼Œå¿«é€Ÿå®Œæˆå»ºè¡¨ï¼›ç”šè‡³è¿˜æ”¯æŒæ™ºèƒ½å¯¼å…¥ï¼Œè¾“å…¥å‡ ä¸ªå•è¯å°±è‡ªåŠ¨ç”Ÿæˆè¡¨æ ¼å’Œæ•°æ®ï¼

![](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1/1666098420835-59bfcd91-072c-45e9-a415-2fca70afd996-20221019132502336-20221019132511479.png)

3ï¼‰æ”¯æŒå¤šç§ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®çš„è§„åˆ™ã€‚æ¯”å¦‚å›ºå®šå€¼ã€éšæœºå€¼ã€æ­£åˆ™è¡¨è¾¾å¼ã€é€’å¢å€¼ï¼Œç”šè‡³è¿˜æ”¯æŒé€‰æ‹©è¯åº“æ¥ç”Ÿæˆç‰¹å®šèŒƒå›´å†…çš„éšæœºå€¼ï¼

![](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1/1666099678320-ffafe59e-60c5-49c7-aeb4-1c20ba3c4f4a-20221019132502444-20221019132511599.png)

4ï¼‰æ”¯æŒè¯åº“ã€è¡¨è®¾è®¡ã€å­—æ®µä¿¡æ¯å…±äº«ã€‚å¯ä»¥å­¦ä¹ æˆ–å‚è€ƒå…¶ä»–åŒå­¦çš„åº“è¡¨è®¾è®¡ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ç°æˆçš„åº“è¡¨å’Œå­—æ®µï¼Œä¸€é”®ç”Ÿæˆæˆ–è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œåä½œä¸‡å²ï¼

![](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1/1666098509897-6fb00eee-79dd-4608-a364-8a0b5271a392-20221019132502525-20221019132511687.png)

5ï¼‰å¯ä»¥ç›´æ¥ä½¿ç”¨ç°æˆçš„è¯åº“æ¥å»ºç«‹å­—å…¸è¡¨ï¼Œæˆ–è€…ä½œä¸ºç ”ç©¶ç”¨çš„æ•°æ®é›†ï¼Œå¹¶æ”¯æŒäºŒæ¬¡å®Œå–„è¯åº“ï¼

![](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1/1666099806973-f48785e1-3d6c-49c9-a093-77c234d4f8b1-20221019132502586-20221019132511780.png)



## å€¼å¾—å­¦ä¹ 

é¡¹ç›®æœ¬èº«åŠŸèƒ½å®Œæ•´ï¼ˆåˆ†ä¸ºç”¨æˆ·å‰å°å’Œç®¡ç†åå°ï¼‰ã€è¾¾åˆ°ä¸Šçº¿æ ‡å‡†ã€æ¶æ„è®¾è®¡æ¸…æ™°ã€ç›®å½•ç»“æ„è§„èŒƒã€‚

å‰ç«¯ç”¨åˆ°äº†å¤æ‚çš„åµŒå¥— & åŠ¨æ€ & å¯æŠ˜å è¡¨å•ã€ä»£ç ç¼–è¾‘å™¨ï¼›åç«¯ç”¨åˆ°äº†å¤šç§ä¸»æµè®¾è®¡æ¨¡å¼ã€AOP åˆ‡é¢é‰´æƒç­‰ï¼Œè¿˜æ˜¯éå¸¸å€¼å¾—æœ‹å‹ä»¬å­¦ä¹ çš„ã€‚

> ä¹Ÿè¯·å¤§ä½¬ä»¬è¯·å¤šå¤šæŒ‡æ•™ ğŸ™ğŸ»



## åŠŸèƒ½å¤§å…¨

### ç”¨æˆ·å‰å°

- å¯è§†åŒ–å»ºè¡¨
- å¿«æ·å¯¼å…¥å»ºè¡¨
  - æ™ºèƒ½å¯¼å…¥
  - å¯¼å…¥è¡¨
  - å¯¼å…¥é…ç½®
  - å¯¼å…¥å»ºè¡¨ SQL
  - å¯¼å…¥ Excel
- ä¸€é”®ç”Ÿæˆ
  - SQL å»ºè¡¨ã€æ’å…¥æ•°æ®è¯­å¥
  - æ¨¡æ‹Ÿæ•°æ®
  - JSON æ•°æ®
  - Java ä»£ç 
  - å‰ç«¯ä»£ç 
- å¤šç§æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆè§„åˆ™
  - å›ºå®šå€¼
  - éšæœºå€¼
  - æ­£åˆ™è¡¨è¾¾å¼
  - é€’å¢
  - å®šåˆ¶è¯åº“
- è¯åº“å…±äº«
  - åˆ›å»ºè¯åº“
  - è¯åº“ç»§æ‰¿
  - ä¸€é”®åˆ›å»ºå­—å…¸è¡¨
  - æ ¹æ®è¯åº“ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼ˆå¯ä»¥ç”¨æ¥å†³å®šåˆé¥­åƒä»€ä¹ˆå“ˆå“ˆï¼‰
- è¡¨ä¿¡æ¯å…±äº«
  - åˆ›å»ºè¡¨ä¿¡æ¯
  - ä¸€é”®å¤åˆ¶å»ºè¡¨è¯­å¥
  - ä¸€é”®å¯¼å…¥è¡¨
- å­—æ®µå…±äº«
  - åˆ›å»ºå­—æ®µ
  - ä¸€é”®å¤åˆ¶åˆ›å»ºå­—æ®µè¯­å¥
  - ä¸€é”®å¯¼å…¥å­—æ®µ
- ä¸¾æŠ¥



### ç®¡ç†åå°

- ç”¨æˆ·ç®¡ç†
- è¯åº“ç®¡ç†
- è¡¨ä¿¡æ¯ç®¡ç†
- å­—æ®µä¿¡æ¯ç®¡ç†
- ä¸¾æŠ¥ç®¡ç†



## æŠ€æœ¯æ ˆ

### å‰ç«¯

ä¸»è¦æŠ€æœ¯ï¼š

- React 18
- Umi 4.x
- Ant Design 4.x ç»„ä»¶åº“
- Ant Design Pro Components é«˜çº§ç»„ä»¶
- TypeScript ç±»å‹æ§åˆ¶
- Eslint ä»£ç è§„èŒƒæ§åˆ¶
- Prettier ç¾åŒ–ä»£ç 

ä¾èµ–åº“ï¼š

- monaco-editor ä»£ç ç¼–è¾‘å™¨
- copy-to-clipboard å‰ªåˆ‡æ¿å¤åˆ¶



### åç«¯

ä¸»è¦æŠ€æœ¯ï¼š

- Spring Boot 2.7.x
- MyBatis Plus 3.5.x
- MySQL 8.x
- Spring AOP

ä¾èµ–åº“ï¼š

- FreeMarkerï¼šæ¨¡æ¿å¼•æ“
- Druidï¼šSQL è§£æ
- datafakerï¼šæ¨¡æ‹Ÿæ•°æ®
- Apache Commons Lang3ï¼šå·¥å…·åº“
- Hutoolï¼šå·¥å…·åº“
- Gsonï¼šJson è§£æ
- Easy Excelï¼šExcel å¯¼å…¥å¯¼å‡º
- Knife4jï¼šæ¥å£æ–‡æ¡£ç”Ÿæˆ



## å¿«é€Ÿå¯åŠ¨

### åç«¯

1. è¿è¡Œ sql ç›®å½•ä¸‹çš„ create_table.sql å»ºè¡¨
2. ä¿®æ”¹ application.yml ä¸­çš„æ•°æ®åº“åœ°å€ä¸ºè‡ªå·±çš„
3. å®‰è£…å®Œ Maven ä¾èµ–åï¼Œç›´æ¥è¿è¡Œå³å¯
4. å·²ç»ç¼–å†™å¥½äº† Dockerfileï¼Œæ”¯æŒ Docker é•œåƒéƒ¨ç½²ã€‚



### å‰ç«¯

å®‰è£…ä¾èµ–ï¼š

```bash
npm run install
```

è¿è¡Œï¼š

```bash
npm run dev
```

æ‰“åŒ…ï¼š

```bash
npm run build
```



## ç³»ç»Ÿè®¾è®¡

ä¸»è¦åˆ†äº«ç³»ç»Ÿçš„æ•´ä½“æ¶æ„å’Œæ ¸å¿ƒè®¾è®¡ï¼Œè€Œä¼ ç»Ÿ web å¼€å‘éƒ¨åˆ†ä¸åšè¿‡å¤šä»‹ç»ã€‚

### æ•´ä½“æ¶æ„è®¾è®¡

æ ¸å¿ƒè®¾è®¡ç†å¿µï¼šå°†å„è¾“å…¥æ–¹å¼ç»Ÿä¸€ä¸ºæ˜ç¡®çš„ Schemaï¼Œå¹¶æ ¹æ® Schema ç”Ÿæˆå„ç±»å†…å®¹ã€‚

æ¶æ„è®¾è®¡å›¾å¦‚ä¸‹ï¼Œå³ä»»æ„è¾“å…¥ => ç»Ÿä¸€ Schema => ä»»æ„è¾“å‡ºï¼š

![](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1/1666144811181-37d5bd7f-28fa-4b17-9147-ae7de8de1585-20221019132502647-20221019132511901.png)

ç³»ç»Ÿåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œå„æ¨¡å—èŒè´£åˆ†æ˜ï¼š

1. Schema æ„é€ å™¨ï¼šå°†å„ç§ä¸åŒçš„è¾“å…¥æºè½¬ä¸ºç»Ÿä¸€çš„ Table Schema å®šä¹‰
2. ç»Ÿä¸€ Schema å®šä¹‰ï¼šæœ¬è´¨æ˜¯ä¸€ä¸ª Java ç±»ï¼ˆJSON é…ç½®ï¼‰ï¼Œç”¨äºä¿å­˜è¡¨å’Œå­—æ®µçš„ä¿¡æ¯
3. ç”Ÿæˆå™¨ï¼šè´Ÿè´£æ ¹æ® Schema ç”Ÿæˆæ•°æ®å’Œä»£ç 
4. å…±äº«æœåŠ¡ï¼šåŒ…æ‹¬è¯åº“ã€è¡¨ä¿¡æ¯ã€å­—æ®µä¿¡æ¯å…±äº«

> æ ¸å¿ƒæ¨¡å—çš„ä»£ç éƒ½åœ¨åç«¯ core ç›®å½•ä¸‹



### Schema æ„é€ å™¨

æ ¸å¿ƒç±»ï¼šTableSchemaBuilderï¼Œä½œç”¨æ˜¯å°†ä¸åŒçš„å‚æ•°ç»Ÿä¸€æ”¶æ•›ä¸º TableSchema å¯¹è±¡ã€‚

åŒ…å«å¦‚ä¸‹æ–¹æ³•ï¼š

![](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1/1666144943025-0d62bf99-5ee6-4135-89da-a0bf270f3f49-20221019132502695-20221019132512014.png)

å…¶ä¸­ï¼ŒbuildFromSqlï¼ˆæ ¹æ® SQL ç”Ÿæˆ Schemaï¼‰ä½¿ç”¨äº† Druid æ•°æ®åº“è¿æ¥æ± è‡ªå¸¦çš„è¯­æ³•è§£æå™¨ï¼Œéå¸¸å¼ºå¤§ã€‚ï¼ˆè§£æå™¨è¿™ç§ä¸œè¥¿ä¸€èˆ¬ä¸è¦è‡ªå·±å†™ï¼Œæœ‰è¿™æ—¶é—´ä½ éƒ½èƒ½åšå‡ ä¸ªé¡¹ç›®äº†ï¼Œå†™å‡ºæ¥è¿˜æ²¡äººå®¶çš„å¥½ç”¨)



### Schema å®šä¹‰

ç”¨äºä¿å­˜è¡¨å’Œå­—æ®µçš„ä¿¡æ¯ï¼Œç»“æ„å¦‚ä¸‹ï¼š

```json
{
  "dbName": "åº“å",
  "tableName": "test_table",
  "tableComment": "è¡¨æ³¨é‡Š",
  "mockNum": 20,
  "fieldList": [{
    "fieldName": "username",
    "comment": "ç”¨æˆ·å",
    "fieldType": "varchar(256)",
    "mockType": "éšæœº",
    "mockParams": "äººå",
    "notNull": true,
    "primaryKey": false,
    "autoIncrement": false
  }]
}
```



### ç”Ÿæˆå™¨

#### å¤šç§ç”Ÿæˆç±»å‹

å°†æ¯ç§ç”Ÿæˆç±»å‹å®šä¹‰ä¸ºä¸€ä¸ª Builderï¼ˆcore/builder ç›®å½•ï¼‰ï¼š

![](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1/1666145274014-bb582f01-31dd-442c-835a-64c1e9fd61a5-20221019132502741-20221019132512095.png)

å…¶ä¸­ï¼Œå¯¹äº SQL ä»£ç ç”Ÿæˆå™¨ï¼ˆ SqlBuilderï¼‰ï¼Œä½¿ç”¨æ–¹è¨€æ¥æ”¯æŒä¸åŒçš„æ•°æ®åº“ç±»å‹ï¼ˆç­–ç•¥æ¨¡å¼ï¼‰ï¼Œå¹¶ä½¿ç”¨å•ä¾‹æ¨¡å¼ + å·¥å‚æ¨¡å¼åˆ›å»ºæ–¹è¨€å®ä¾‹ã€‚

å¯¹äº Javaã€å‰ç«¯ä»£ç ç”Ÿæˆå™¨ï¼ˆJavaCodeBuilderã€FrontendCodeBuilderï¼‰ï¼Œä½¿ç”¨ FreeMarker æ¨¡æ¿å¼•æ“æ¥ç”Ÿæˆã€‚
æ¨¡æ¿ä»£ç å¦‚ä¸‹ï¼š

![](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1/1666146737562-53f46d04-489d-4d00-ab9b-11cf237cd4a9-20221019132502769-20221019132512184.png)



#### å¤šç§æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆè§„åˆ™

æ¯ç§ç”Ÿæˆè§„åˆ™å®šä¹‰ä¸ºä¸€ä¸ª Generatorï¼Œä½¿ç”¨ DataGeneratorFactoryï¼ˆå·¥å‚æ¨¡å¼ï¼‰å¯¹å¤šä¸ª Generator å®ä¾‹è¿›è¡Œç»Ÿä¸€çš„åˆ›å»ºå’Œç®¡ç†ã€‚

![](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1/1666145631468-8d0d5dad-0cd8-41a5-8a8b-e65c5feb7829-20221019132502828-20221019132512285.png)

ä½¿ç”¨ dataFaker åº“å®ç°éšæœºæ•°æ®ç”Ÿæˆï¼ˆRandomDataGeneratorï¼‰ã€‚

ä½¿ç”¨ Generex åº“å®ç°æ­£åˆ™è¡¨è¾¾å¼æ•°æ®ç”Ÿæˆï¼ˆRuleDataGenerator)ã€‚



#### ç»Ÿä¸€çš„ç”Ÿæˆå…¥å£

ä½¿ç”¨é—¨é¢æ¨¡å¼èšåˆå„ç§ç”Ÿæˆç±»å‹ï¼Œæä¾›ç»Ÿä¸€çš„ç”Ÿæˆè°ƒç”¨å’Œæ ¡éªŒæ–¹æ³•ï¼š

![](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1/1666145871478-af8512a5-d9c3-4166-8253-0304639c62b0-20221019132502858-20221019132512359.png)



### å…±äº«æœåŠ¡

åŒ…æ‹¬è¯åº“ã€è¡¨ä¿¡æ¯ã€å­—æ®µä¿¡æ¯å…±äº«ï¼Œå…¶å®å°±æ˜¯å¯¹è¿™äº›å®ä½“çš„å¢åˆ æ”¹æŸ¥ web æœåŠ¡ï¼Œä¸å¤šè¯´äº†ã€‚



## è´¡çŒ®æŒ‡å—

æ¬¢è¿å„ä½æœ‹å‹å‚ä¸è´¡çŒ®ï¼Œè¿˜è¯·å…ˆä»”ç»†é˜…è¯»ä»¥ä¸‹å†…å®¹ï¼š

1. åœ¨è´¡çŒ®å‰ï¼Œè¯·ç¡®ä¿ä½ å¯¹é¡¹ç›®çš„ä»£ç å’Œæ¶æ„è®¾è®¡æœ‰ä¸€å®šçš„äº†è§£ï¼Œè€Œä¸æ˜¯å‡­ç›´è§‰å»ä¿®æ”¹ä»£ç 
2. å¯ä»¥ä»ä¿®å¤ issues åŒº bugã€å¤„ç†åé¦ˆæ„è§ï¼ˆ[https://support.qq.com/product/440825](https://support.qq.com/product/440825)ï¼‰ã€æ‰©å±•é¡¹ç›®åŠŸèƒ½ç­‰è§’åº¦å‚ä¸è´¡çŒ®
3. åœ¨æäº¤ä»£ç å‰ï¼Œè¯·åŠ¡å¿…éµå¾ªé¡¹ç›®çš„ä»£ç æ ¼å¼ã€å‘½åç­‰è§„èŒƒï¼Œå¹¶ä¸”åšåˆ°æœ€å°æ”¹åŠ¨ï¼ˆä¸éœ€è¦æ”¹çš„å†…å®¹ï¼Œä¸€ä¸ªå­—ç¬¦éƒ½ä¸è¦åŠ¨ï¼‰



## è‡´è°¢

éƒ¨åˆ†è¯åº“æ¥æºï¼š[https://github.com/fighting41love/funNLP](https://github.com/fighting41love/funNLP)

ç¤ºä¾‹è¡¨ä¿¡æ¯æ¥æºï¼š[https://open.yesapi.cn/list1.html](https://open.yesapi.cn/list1.html)

